ifndef CONTIKI
  $(error CONTIKI not defined! You must specify where CONTIKI resides!)
endif

### Include the board-specific makefile
PLATFORM_ROOT_DIR = $(ARCH_PATH)/platform/$(TARGET)

WERROR=0

ifndef NRF52_WITHOUT_SOFTDEVICE
  NRF52_WITHOUT_SOFTDEVICE=1
endif

CONTIKI_TARGET_DIRS += . dev config
CONTIKI_SOURCEFILES += platform.c leds-arch.c nrf52840dk-sensors.c temperature-sensor.c board-buttons.c

ifeq ($(NRF52_USE_RTT),1)
### Suppress the existing debug I/O in os/lib
MAKE_WITH_LIB_DBG_IO = 0
CONTIKI_TARGET_DIRS += rtt
CONTIKI_SOURCEFILES += rtt-printf.c segger-rtt.c segger-rtt-printf.c
else
CONTIKI_SOURCEFILES += dbg.c
endif

### Unless the example dictates otherwise, build with code size optimisations switched off
SMALL ?= 0

### Define the CPU directory and pull in the correct CPU makefile.
CONTIKI_CPU=$(ARCH_PATH)/cpu/nrf52840
include $(CONTIKI_CPU)/Makefile.nrf52840
